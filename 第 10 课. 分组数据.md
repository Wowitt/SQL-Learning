### 10.1 数据分组

分组可以将数据分为多个**逻辑组**，对每个组进行计算。

### 10.2 创建分组

`SELECT [col ...] FROM table GROUP BY col`

`GROUP BY`  的一些重要规定:

* `GROUP BY` 子句可以包含**任意数目**的列，因而可以对分组进行嵌套，更细致地进行数据分组;
* 如果嵌套了分组，数据将在**最后指定的分组**上进行汇总。在建立分组时，指定的所有列都一起计算(所以不能从个别的列取回数据);
* `GROUP BY` 列出的每一列都**必须**是**检索列或有效的表达式**，`SELECT` 中使用了表达式则 `GROUP BY` 中也必须指定相同的表达式而**不能使用别名**;
* 大多数 `SQL` 实现**不允许** `GROUP BY` **长度可变的数据类型**的列;
* `NULL` 值将被分为**单独一组**;
* `GROUP BY` 必须出现在 `WHERE` 之后，`ORDER BY`  之前。

### 10.3 过滤分组

`WHERE` 用于行级过滤，`HAVING` 用于分组过滤。

`HAVING` 支持所有 `WHERE` 所支持的。

`SELECT col FROM table GROUP BY col HAVING condition`

将返回按 *col* 分组后，满足 *condition* 的组的集合。

### 10.4 分组和排序

`GROUP BY` 的分组顺序是不受保证的，因此需要使用 `ORDER BY` 保证数据正确排序。

### 10.5 SELECT 子句顺序

| 子句       | 说明               | 是否必须使用           |
| ---------- | ------------------ | ---------------------- |
| `SELECT`   | 要返回的列或表达式 | 是                     |
| `FROM`     | 从中检索数据的表   | 仅在从表选择数据时使用 |
| `WHERE`    | 行级过滤           | 否                     |
| `GROUP BY` | 分组说明           | 仅在按组计算聚集时使用 |
| `HAVING`   | 组级过滤           | 否                     |
| `ORDER BY` | 输出顺序排序       | 否                     |

